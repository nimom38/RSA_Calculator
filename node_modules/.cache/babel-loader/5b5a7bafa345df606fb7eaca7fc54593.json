{"ast":null,"code":"/* global BigInt */\nconst randojs = require(\"@nastyox/rando.js\");\n\nconst rando = randojs.rando;\nexport const initialState = {\n  p: BigInt(\"0\"),\n  q: BigInt(\"0\"),\n  n: BigInt(\"0\"),\n  phi: BigInt(\"0\"),\n  e: BigInt(\"0\"),\n  d: BigInt(\"0\")\n};\n\nconst power = (a, b, n) => {\n  [a, b, n] = [BigInt(a), BigInt(b), BigInt(n)];\n  let res = BigInt(1);\n  a %= n;\n\n  while (b > BigInt(0)) {\n    if (b & BigInt(1)) res = res * a % n;\n    b >>= BigInt(1);\n    a = a * a % n;\n  }\n\n  return res;\n};\n\nconst millerTest = (d, n) => {\n  [d, n] = [BigInt(d), BigInt(n)];\n  const a = BigInt(2) + BigInt(rando(100000000, 10000000000000000000000)) % (n - BigInt(4));\n  let p = power(a, d, n);\n  if (p === BigInt(1) || p === n - BigInt(1)) return true;\n\n  while (d !== n - BigInt(1)) {\n    p = p * p % n;\n    d *= BigInt(2);\n    if (p === BigInt(1)) return false;\n    if (p === n - BigInt(1)) return true;\n  }\n\n  return false;\n};\n\nexport const checkPrime = n => {\n  n = BigInt(n);\n  if (n <= BigInt(1) || n === BigInt(4)) return false;\n  if (n <= BigInt(3)) return true;\n  let d = n - BigInt(1);\n\n  while (d % BigInt(2) === BigInt(0)) d /= BigInt(2);\n\n  for (var i = 0; i < 200000; ++i) {\n    if (!millerTest(d, n)) return false;\n  }\n\n  return true;\n};\n\nconst reducer = (state, action) => {\n  console.log(action);\n  console.log(checkPrime(4));\n\n  switch (action.type) {\n    case \"SET_P_AND_Q\":\n      {\n        return { ...state,\n          p: action.item\n        };\n      }\n\n    case \"REMOVE_FROM_BASKET\":\n      return {\n        state\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["/mnt/b37daa4f-64b1-411a-b35c-59820ce6f767/Documents/Projects/rsa-calculator/src/Reducer.js"],"names":["randojs","require","rando","initialState","p","BigInt","q","n","phi","e","d","power","a","b","res","millerTest","checkPrime","i","reducer","state","action","console","log","type","item"],"mappings":"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","sourcesContent":["/* global BigInt */\n\nconst randojs = require(\"@nastyox/rando.js\");\nconst rando = randojs.rando;\n\nexport const initialState = {\n  p: BigInt(\"0\"),\n  q: BigInt(\"0\"),\n  n: BigInt(\"0\"),\n  phi: BigInt(\"0\"),\n  e: BigInt(\"0\"),\n  d: BigInt(\"0\"),\n};\n\nconst power = (a, b, n) => {\n  [a, b, n] = [BigInt(a), BigInt(b), BigInt(n)];\n  let res = BigInt(1);\n  a %= n;\n  while (b > BigInt(0)) {\n    if (b & BigInt(1)) res = (res * a) % n;\n    b >>= BigInt(1);\n    a = (a * a) % n;\n  }\n  return res;\n};\n\nconst millerTest = (d, n) => {\n  [d, n] = [BigInt(d), BigInt(n)];\n  const a =\n    BigInt(2) +\n    (BigInt(rando(100000000, 10000000000000000000000)) % (n - BigInt(4)));\n  let p = power(a, d, n);\n  if (p === BigInt(1) || p === n - BigInt(1)) return true;\n\n  while (d !== n - BigInt(1)) {\n    p = (p * p) % n;\n    d *= BigInt(2);\n\n    if (p === BigInt(1)) return false;\n\n    if (p === n - BigInt(1)) return true;\n  }\n  return false;\n};\n\nexport const checkPrime = (n) => {\n  n = BigInt(n);\n\n  if (n <= BigInt(1) || n === BigInt(4)) return false;\n  if (n <= BigInt(3)) return true;\n  let d = n - BigInt(1);\n\n  while (d % BigInt(2) === BigInt(0)) d /= BigInt(2);\n  for (var i = 0; i < 200000; ++i) {\n    if (!millerTest(d, n)) return false;\n  }\n  return true;\n};\n\nconst reducer = (state, action) => {\n  console.log(action);\n  console.log(checkPrime(4));\n  switch (action.type) {\n    case \"SET_P_AND_Q\": {\n      return { ...state, p: action.item };\n    }\n    case \"REMOVE_FROM_BASKET\":\n      return { state };\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}